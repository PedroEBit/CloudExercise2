name: Gerar Slides PDF

on:
  push:
    paths:
      - "presentation.md"
      - "*.md"
      - "**/*.md"

jobs:
  build-slides:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      
    steps:
      - uses: actions/checkout@v4

    #   - name: Instalar Pandoc
    #     run: sudo apt-get update && sudo apt-get install -y pandoc texlive

    #   - name: Converter Markdown em PDF
    #     run: |
    #       pandoc docs/presentation.md -o slides.pdf --slide-level=2 --pdf-engine=xelatex

      - name: Converter Markdown em PDF usando Docker
        run: |
          docker run --rm \
            --volume "$(pwd):/data" \
            pandoc/latex \
            presentation.md -o slides.pdf --slide-level=2

      - name: Criar página HTML
        run: |
          echo '<!DOCTYPE html>
          <html>
            <head>
              <title>Slides da Apresentação</title>
              <meta charset="UTF-8">
            </head>
            <body>
              <h1>Slides da Apresentação</h1>
              <p>
                <a href="slides.pdf" class="button">
                  Baixar PDF dos Slides
                </a>
              </p>
            </body>
          </html>' > index.html

      - name: Publicar no GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: .
          publish_branch: slides-output
          force_orphan: true
          exclude_assets: '.github'
